<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Advanced CSS Grid Dashboard</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563eb">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìä</text></svg>">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        /* Core Colors */
        --primary-color: #2563eb;
        --secondary-color: #1e40af;
        --accent-color: #f59e0b;
        --success-color: #10b981;
        --danger-color: #ef4444;
        --warning-color: #f59e0b;
        --info-color: #3b82f6;

        /* Light Theme Colors */
        --text-primary: #1f2937;
        --text-secondary: #6b7280;
        --text-tertiary: #9ca3af;
        --bg-primary: #ffffff;
        --bg-secondary: #f9fafb;
        --bg-tertiary: #f3f4f6;
        --border-color: #e5e7eb;
        --border-hover: #d1d5db;

        /* Shadows */
        --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1),
          0 1px 2px 0 rgba(0, 0, 0, 0.06);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
          0 4px 6px -2px rgba(0, 0, 0, 0.05);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);

        /* Layout Variables */
        --sidebar-width: 280px;
        --header-height: 70px;
        --content-gap: 1.5rem;
        --widget-min-width: 300px;
        --border-radius: 12px;
        --border-radius-sm: 8px;
        --border-radius-lg: 16px;

        /* Transitions */
        --transition-fast: 0.15s ease;
        --transition-normal: 0.3s ease;
        --transition-slow: 0.5s ease;
      }

      /* Dark Theme */
      [data-theme="dark"] {
        --text-primary: #f9fafb;
        --text-secondary: #d1d5db;
        --text-tertiary: #9ca3af;
        --bg-primary: #1f2937;
        --bg-secondary: #111827;
        --bg-tertiary: #374151;
        --border-color: #374151;
        --border-hover: #4b5563;

        --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3),
          0 1px 2px 0 rgba(0, 0, 0, 0.2);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3),
          0 4px 6px -2px rgba(0, 0, 0, 0.2);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.4),
          0 10px 10px -5px rgba(0, 0, 0, 0.2);
      }

      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI',
          Roboto, sans-serif;
        background-color: var(--bg-secondary);
        color: var(--text-primary);
        line-height: 1.6;
        transition: background-color var(--transition-normal), color var(--transition-normal);
      }

      /* ==========================================
        üéØ THEME TOGGLE BUTTON
        ========================================== */
      .theme-toggle {
        background: var(--bg-primary);
        border: 1px solid var(--border-color);
        border-radius: var(--border-radius-sm);
        padding: 0.5rem;
        cursor: pointer;
        transition: all var(--transition-fast);
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
      }

      .theme-toggle:hover {
        background: var(--bg-tertiary);
        border-color: var(--border-hover);
      }

      .theme-toggle svg {
        width: 20px;
        height: 20px;
        transition: transform var(--transition-fast);
      }

      .theme-toggle:hover svg {
        transform: scale(1.1);
      }

      /* ==========================================
        üéØ MAIN GRID CONTAINER
        Advanced CSS Grid with named areas and responsive breakpoints
        ========================================== */
      .dashboard-grid {
        display: grid;
        grid-template-columns: var(--sidebar-width) 1fr;
        grid-template-rows: var(--header-height) 1fr;
        grid-template-areas:
          'sidebar header'
          'sidebar main';
        min-height: 100vh;
        gap: 0;
        transition: grid-template-columns var(--transition-normal);
      }

      /* ==========================================
        üéØ HEADER SECTION
        Fixed header with search and user controls
        ========================================== */
      .header {
        grid-area: header;
        background: var(--bg-primary);
        border-bottom: 1px solid var(--border-color);
        display: grid;
        grid-template-columns: 1fr auto auto;
        align-items: center;
        padding: 0 2rem;
        gap: 1rem;
        box-shadow: var(--shadow);
        z-index: 100;
      }

      .search-bar {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: 8px;
        padding: 0.5rem 1rem;
        font-size: 0.875rem;
        max-width: 400px;
        transition: all 0.2s ease;
      }

      .search-bar:focus {
        outline: none;
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
      }

      .header-actions {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .notification-badge {
        position: relative;
        padding: 0.5rem;
        background: var(--bg-secondary);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .notification-badge:hover {
        background: var(--border-color);
      }

      .notification-badge::after {
        content: '';
        position: absolute;
        top: 4px;
        right: 4px;
        width: 8px;
        height: 8px;
        background: var(--danger-color);
        border-radius: 50%;
      }

      /* ==========================================
        üéØ SIDEBAR NAVIGATION
        Collapsible sidebar with smooth animations
        ========================================== */
      .sidebar {
        grid-area: sidebar;
        background: var(--bg-primary);
        border-right: 1px solid var(--border-color);
        padding: 2rem 0;
        overflow-y: auto;
        box-shadow: var(--shadow);
      }

      .logo {
        padding: 0 2rem 2rem;
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary-color);
        border-bottom: 1px solid var(--border-color);
        margin-bottom: 2rem;
      }

      .nav-menu {
        list-style: none;
      }

      .nav-item {
        margin: 0.25rem 1rem;
      }

      .nav-link {
        display: flex;
        align-items: center;
        padding: 0.75rem 1rem;
        text-decoration: none;
        color: var(--text-secondary);
        border-radius: 8px;
        transition: all 0.2s ease;
        font-weight: 500;
      }

      .nav-link:hover,
      .nav-link.active {
        background: var(--bg-secondary);
        color: var(--primary-color);
      }

      .nav-icon {
        width: 20px;
        height: 20px;
        margin-right: 0.75rem;
        background: currentColor;
        mask-size: contain;
        mask-repeat: no-repeat;
        mask-position: center;
      }

      /* ==========================================
        üéØ MAIN CONTENT GRID
        Nested grid for dashboard widgets
        ========================================== */
      .main-content {
        grid-area: main;
        padding: 2rem;
        overflow-y: auto;
      }

      .content-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        grid-auto-rows: minmax(200px, auto);
        gap: 1.5rem;
        margin-bottom: 2rem;
      }

      /* ==========================================
        üéØ WIDGET COMPONENTS
        Reusable card components with different layouts
        ========================================== */
      .widget {
        background: var(--bg-primary);
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: var(--shadow);
        border: 1px solid var(--border-color);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .widget:hover {
        box-shadow: var(--shadow-lg);
        transform: translateY(-2px);
      }

      .widget-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
      }

      .widget-title {
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--text-primary);
      }

      .widget-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--primary-color);
        margin: 0.5rem 0;
      }

      .widget-change {
        font-size: 0.875rem;
        font-weight: 500;
      }

      .widget-change.positive {
        color: var(--success-color);
      }

      .widget-change.negative {
        color: var(--danger-color);
      }

      /* Specific widget layouts */
      .widget-large {
        grid-column: span 2;
        grid-row: span 2;
      }

      .widget-wide {
        grid-column: span 2;
      }

      .widget-tall {
        grid-row: span 2;
      }

      /* ==========================================
        üéØ CHART CONTAINER
        Real chart integration with Chart.js
        ========================================== */
      .chart-container {
        height: 300px;
        background: var(--bg-primary);
        border-radius: var(--border-radius-sm);
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 1rem;
        position: relative;
      }

      .chart-container canvas {
        max-width: 100%;
        max-height: 100%;
      }

      .chart-placeholder {
        background: var(--bg-secondary);
        border: 2px dashed var(--border-color);
        border-radius: 8px;
        height: 150px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-secondary);
        font-style: italic;
      }

      /* ==========================================
        üéØ DATA TABLE
        Responsive table with sticky headers
        ========================================== */
      .data-table-container {
        overflow-x: auto;
        border-radius: 8px;
        border: 1px solid var(--border-color);
        margin-top: 1rem;
      }

      .data-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.875rem;
      }

      .data-table th,
      .data-table td {
        padding: 0.75rem 1rem;
        text-align: left;
        border-bottom: 1px solid var(--border-color);
      }

      .data-table th {
        background: var(--bg-secondary);
        font-weight: 600;
        color: var(--text-primary);
        position: sticky;
        top: 0;
      }

      .data-table tbody tr:hover {
        background: var(--bg-secondary);
      }

      /* ==========================================
        üéØ RESPONSIVE DESIGN
        Mobile-first approach with progressive enhancement
        ========================================== */
      @media (max-width: 1024px) {
        .dashboard-grid {
          grid-template-columns: 1fr;
          grid-template-rows: 70px auto 1fr;
          grid-template-areas:
            'header'
            'sidebar'
            'main';
        }

        .sidebar {
          order: 2;
          padding: 1rem 0;
        }

        .main-content {
          order: 3;
          padding: 1rem;
        }

        .content-grid {
          grid-template-columns: 1fr;
          gap: 1rem;
        }

        .widget-large,
        .widget-wide {
          grid-column: span 1;
        }
      }

      @media (max-width: 768px) {
        .header {
          padding: 0 1rem;
          grid-template-columns: 1fr auto;
        }

        .search-bar {
          display: none;
        }

        .content-grid {
          grid-template-columns: 1fr;
        }

        .widget {
          padding: 1rem;
        }

        .widget-value {
          font-size: 1.5rem;
        }
      }

      /* ==========================================
        üéØ LOADING STATES & ANIMATIONS
        Smooth loading animations for dynamic content
        ========================================== */
      .loading {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        position: relative;
      }

      .loading::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        animation: shimmer 1.5s infinite;
      }

      [data-theme="dark"] .loading::after {
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
      }

      @keyframes shimmer {
        0% {
          transform: translateX(-100%);
        }
        100% {
          transform: translateX(100%);
        }
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }

      .fade-in {
        animation: fadeIn 0.5s ease-in-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* ==========================================
        üéØ ENHANCED INTERACTIONS
        ========================================== */
      .widget:hover .widget-value {
        transform: scale(1.05);
        transition: transform var(--transition-fast);
      }

      .data-table tbody tr {
        transition: all var(--transition-fast);
      }

      .data-table tbody tr:hover {
        background: var(--bg-tertiary);
        transform: translateX(4px);
      }

      /* ==========================================
        üéØ RESPONSIVE CHART CONTAINERS
        ========================================== */
      @media (max-width: 768px) {
        .chart-container {
          height: 250px;
        }
      }

      /* ==========================================
        üéØ OFFLINE INDICATOR
        ========================================== */
      .offline-indicator {
        position: fixed;
        top: 20px;
        right: 20px;
        background: var(--warning-color);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: var(--border-radius-sm);
        font-size: 0.875rem;
        font-weight: 500;
        z-index: 1000;
        transform: translateY(-100px);
        transition: transform var(--transition-normal);
      }

      .offline-indicator.show {
        transform: translateY(0);
      }
    </style>
  </head>
  <body>
    <!-- Offline Indicator -->
    <div class="offline-indicator" id="offlineIndicator">
      üì° You're offline - some features may be limited
    </div>

    <!-- ==========================================
    üéØ MAIN DASHBOARD GRID
    ========================================== -->
    <div class="dashboard-grid">
      <!-- HEADER -->
      <header class="header">
        <input
          type="text"
          class="search-bar"
          placeholder="Search anything..." />
        <div class="header-actions">
          <button class="theme-toggle" id="themeToggle" title="Toggle theme">
            <svg class="sun-icon" width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd" />
            </svg>
            <svg class="moon-icon" width="20" height="20" fill="currentColor" viewBox="0 0 20 20" style="display: none;">
              <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z" />
            </svg>
          </button>
          <div class="notification-badge">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20">
              <path
                d="M10 2C6.686 2 4 4.686 4 8v4.667L2.4 14.8c-.267.267-.4.633-.4 1 0 .767.633 1.4 1.4 1.4h13.2c.767 0 1.4-.633 1.4-1.4 0-.367-.133-.733-.4-1l-1.6-2.133V8c0-3.314-2.686-6-6-6z" />
              <path d="M8 17c0 1.1.9 2 2 2s2-.9 2-2" />
            </svg>
          </div>
          <div
            style="
              width: 40px;
              height: 40px;
              background: var(--primary-color);
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              color: white;
              font-weight: 600;
            ">
            JD
          </div>
        </div>
      </header>

      <!-- SIDEBAR -->
      <aside class="sidebar">
        <div class="logo">Dashboard</div>
        <nav>
          <ul class="nav-menu">
            <li class="nav-item">
              <a href="#" class="nav-link active">
                <div
                  class="nav-icon"
                  style="
                    mask-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 fill=%22currentColor%22 viewBox=%220 0 20 20%22><path d=%22M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z%22/></svg>');
                  "></div>
                Dashboard
              </a>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link">
                <div
                  class="nav-icon"
                  style="
                    mask-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 fill=%22currentColor%22 viewBox=%220 0 20 20%22><path d=%22M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z%22/></svg>');
                  "></div>
                Analytics
              </a>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link">
                <div
                  class="nav-icon"
                  style="
                    mask-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 fill=%22currentColor%22 viewBox=%220 0 20 20%22><path d=%22M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z%22/></svg>');
                  "></div>
                Users
              </a>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link">
                <div
                  class="nav-icon"
                  style="
                    mask-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 fill=%22currentColor%22 viewBox=%220 0 20 20%22><path d=%22M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z%22/></svg>');
                  "></div>
                Reports
              </a>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link">
                <div
                  class="nav-icon"
                  style="
                    mask-image: url('data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 fill=%22currentColor%22 viewBox=%220 0 20 20%22><path d=%22M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z%22/></svg>');
                  "></div>
                Settings
              </a>
            </li>
          </ul>
        </nav>
      </aside>

      <!-- MAIN CONTENT -->
      <main class="main-content">
        <!-- KPI Cards Grid -->
        <div class="content-grid">
          <!-- Revenue Widget -->
          <div class="widget fade-in" data-widget="revenue">
            <div class="widget-header">
              <span class="widget-title">Revenue</span>
              <span style="color: var(--text-secondary)">üìà</span>
            </div>
            <div class="widget-value loading">$47,521</div>
            <div class="widget-change positive">+12.5% from last month</div>
          </div>

          <!-- Users Widget -->
          <div class="widget fade-in" data-widget="users">
            <div class="widget-header">
              <span class="widget-title">Active Users</span>
              <span style="color: var(--text-secondary)">üë•</span>
            </div>
            <div class="widget-value loading">2,847</div>
            <div class="widget-change positive">+3.2% from last week</div>
          </div>

          <!-- Orders Widget -->
          <div class="widget fade-in" data-widget="orders">
            <div class="widget-header">
              <span class="widget-title">Orders</span>
              <span style="color: var(--text-secondary)">üõçÔ∏è</span>
            </div>
            <div class="widget-value loading">1,423</div>
            <div class="widget-change negative">-2.1% from last month</div>
          </div>

          <!-- Conversion Rate Widget -->
          <div class="widget fade-in" data-widget="conversion">
            <div class="widget-header">
              <span class="widget-title">Conversion Rate</span>
              <span style="color: var(--text-secondary)">‚ö°</span>
            </div>
            <div class="widget-value loading">3.4%</div>
            <div class="widget-change positive">+0.8% from last month</div>
          </div>

          <!-- New Performance Widget -->
          <div class="widget fade-in" data-widget="performance">
            <div class="widget-header">
              <span class="widget-title">Performance Score</span>
              <span style="color: var(--text-secondary)">‚≠ê</span>
            </div>
            <div class="widget-value loading">94.2</div>
            <div class="widget-change positive">+2.1% from last week</div>
          </div>

          <!-- New Bounce Rate Widget -->
          <div class="widget fade-in" data-widget="bounce">
            <div class="widget-header">
              <span class="widget-title">Bounce Rate</span>
              <span style="color: var(--text-secondary)">üìâ</span>
            </div>
            <div class="widget-value loading">24.8%</div>
            <div class="widget-change positive">-1.3% from last month</div>
          </div>

          <!-- Large Chart Widget -->
          <div class="widget widget-large fade-in">
            <div class="widget-header">
              <span class="widget-title">Revenue Overview</span>
              <select
                style="
                  border: 1px solid var(--border-color);
                  border-radius: 4px;
                  padding: 0.25rem 0.5rem;
                  font-size: 0.875rem;
                ">
                <option>Last 30 days</option>
                <option>Last 90 days</option>
                <option>Last year</option>
              </select>
            </div>
            <div class="chart-container">
              <canvas id="revenueChart" width="400" height="200"></canvas>
            </div>
          </div>

          <!-- Activity Feed Widget -->
          <div class="widget widget-tall fade-in">
            <div class="widget-header">
              <span class="widget-title">Recent Activity</span>
              <span style="color: var(--text-secondary)">üîî</span>
            </div>
            <div style="space-y: 1rem">
              <div
                style="
                  padding: 0.75rem 0;
                  border-bottom: 1px solid var(--border-color);
                ">
                <div style="font-weight: 500; font-size: 0.875rem">
                  New user registered
                </div>
                <div style="color: var(--text-secondary); font-size: 0.75rem">
                  2 minutes ago
                </div>
              </div>
              <div
                style="
                  padding: 0.75rem 0;
                  border-bottom: 1px solid var(--border-color);
                ">
                <div style="font-weight: 500; font-size: 0.875rem">
                  Order #1247 completed
                </div>
                <div style="color: var(--text-secondary); font-size: 0.75rem">
                  5 minutes ago
                </div>
              </div>
              <div
                style="
                  padding: 0.75rem 0;
                  border-bottom: 1px solid var(--border-color);
                ">
                <div style="font-weight: 500; font-size: 0.875rem">
                  Payment processed
                </div>
                <div style="color: var(--text-secondary); font-size: 0.75rem">
                  12 minutes ago
                </div>
              </div>
              <div style="padding: 0.75rem 0">
                <div style="font-weight: 500; font-size: 0.875rem">
                  System backup completed
                </div>
                <div style="color: var(--text-secondary); font-size: 0.75rem">
                  1 hour ago
                </div>
              </div>
            </div>
          </div>

          <!-- Traffic Sources Widget -->
          <div class="widget fade-in">
            <div class="widget-header">
              <span class="widget-title">Traffic Sources</span>
              <span style="color: var(--text-secondary)">üåê</span>
            </div>
            <div class="chart-container" style="height: 200px;">
              <canvas id="trafficChart" width="300" height="200"></canvas>
            </div>
          </div>

          <!-- Sales Trend Widget -->
          <div class="widget fade-in">
            <div class="widget-header">
              <span class="widget-title">Sales Trend</span>
              <span style="color: var(--text-secondary)">üìä</span>
            </div>
            <div class="chart-container" style="height: 200px;">
              <canvas id="salesChart" width="300" height="200"></canvas>
            </div>
          </div>

          <!-- Data Table Widget -->
          <div class="widget widget-wide fade-in">
            <div class="widget-header">
              <span class="widget-title">Top Products</span>
              <button
                style="
                  background: var(--primary-color);
                  color: white;
                  border: none;
                  padding: 0.5rem 1rem;
                  border-radius: 6px;
                  font-size: 0.875rem;
                  cursor: pointer;
                ">
                View All
              </button>
            </div>
            <div class="data-table-container">
              <table class="data-table">
                <thead>
                  <tr>
                    <th>Product</th>
                    <th>Sales</th>
                    <th>Revenue</th>
                    <th>Growth</th>
                  </tr>
                </thead>
                <tbody id="productsTable">
                  <tr>
                    <td style="font-weight: 500">Premium Package</td>
                    <td>2,847</td>
                    <td>$23,450</td>
                    <td style="color: var(--success-color); font-weight: 500">
                      +12.5%
                    </td>
                  </tr>
                  <tr>
                    <td style="font-weight: 500">Basic Package</td>
                    <td>1,923</td>
                    <td>$15,220</td>
                    <td style="color: var(--success-color); font-weight: 500">
                      +8.3%
                    </td>
                  </tr>
                  <tr>
                    <td style="font-weight: 500">Enterprise</td>
                    <td>456</td>
                    <td>$45,600</td>
                    <td style="color: var(--danger-color); font-weight: 500">
                      -2.1%
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </main>
    </div>

    <script>
      // ==========================================
      // üéØ DASHBOARD APPLICATION
      // Modern dashboard with real data, themes, and PWA features
      // ==========================================

      class DashboardApp {
        constructor() {
          this.theme = localStorage.getItem('theme') || 'light';
          this.charts = {};
          this.data = {};
          this.init();
        }

        init() {
          this.initTheme();
          this.initEventListeners();
          this.initCharts();
          this.loadData();
          this.initPWA();
          this.animateWidgets();
        }

        // ==========================================
        // THEME MANAGEMENT
        // ==========================================
        initTheme() {
          document.documentElement.setAttribute('data-theme', this.theme);
          this.updateThemeToggle();
        }

        toggleTheme() {
          this.theme = this.theme === 'light' ? 'dark' : 'light';
          document.documentElement.setAttribute('data-theme', this.theme);
          localStorage.setItem('theme', this.theme);
          this.updateThemeToggle();
          this.updateChartsTheme();
        }

        updateThemeToggle() {
          const sunIcon = document.querySelector('.sun-icon');
          const moonIcon = document.querySelector('.moon-icon');

          if (this.theme === 'dark') {
            sunIcon.style.display = 'none';
            moonIcon.style.display = 'block';
          } else {
            sunIcon.style.display = 'block';
            moonIcon.style.display = 'none';
          }
        }

        // ==========================================
        // EVENT LISTENERS
        // ==========================================
        initEventListeners() {
          // Theme toggle
          document.getElementById('themeToggle').addEventListener('click', () => {
            this.toggleTheme();
          });

          // Search functionality
          const searchBar = document.querySelector('.search-bar');
          if (searchBar) {
            searchBar.addEventListener('focus', function () {
              this.style.boxShadow = '0 0 0 3px rgba(37, 99, 235, 0.1)';
            });

            searchBar.addEventListener('blur', function () {
              this.style.boxShadow = 'none';
            });
          }

          // Navigation active state
          const navLinks = document.querySelectorAll('.nav-link');
          navLinks.forEach((link) => {
            link.addEventListener('click', (e) => {
              e.preventDefault();
              navLinks.forEach((l) => l.classList.remove('active'));
              link.classList.add('active');
            });
          });
        }

        // ==========================================
        // MOCK API DATA
        // ==========================================
        async fetchMockData() {
          // Simulate API delay
          await new Promise(resolve => setTimeout(resolve, 1000));

          return {
            revenue: {
              value: 47521 + Math.floor(Math.random() * 10000),
              change: (Math.random() * 20 - 10).toFixed(1),
              trend: 'up'
            },
            users: {
              value: 2847 + Math.floor(Math.random() * 500),
              change: (Math.random() * 10 - 5).toFixed(1),
              trend: 'up'
            },
            orders: {
              value: 1423 + Math.floor(Math.random() * 200),
              change: (Math.random() * 8 - 4).toFixed(1),
              trend: Math.random() > 0.5 ? 'up' : 'down'
            },
            conversion: {
              value: (3.4 + Math.random() * 2 - 1).toFixed(1),
              change: (Math.random() * 2 - 1).toFixed(1),
              trend: 'up'
            },
            performance: {
              value: (94.2 + Math.random() * 5 - 2.5).toFixed(1),
              change: (Math.random() * 4 - 2).toFixed(1),
              trend: 'up'
            },
            bounce: {
              value: (24.8 + Math.random() * 10 - 5).toFixed(1),
              change: (Math.random() * 3 - 1.5).toFixed(1),
              trend: 'down'
            },
            chartData: {
              revenue: Array.from({length: 30}, (_, i) =>
                40000 + Math.sin(i * 0.2) * 5000 + Math.random() * 3000
              ),
              labels: Array.from({length: 30}, (_, i) => {
                const date = new Date();
                date.setDate(date.getDate() - (29 - i));
                return date.toLocaleDateString('pt-BR', { month: 'short', day: 'numeric' });
              })
            },
            trafficData: [
              35 + Math.floor(Math.random() * 10 - 5),
              25 + Math.floor(Math.random() * 8 - 4),
              30 + Math.floor(Math.random() * 6 - 3),
              10 + Math.floor(Math.random() * 4 - 2)
            ],
            salesData: Array.from({length: 6}, () =>
              Math.floor(Math.random() * 25 + 10)
            ),
            products: [
              {
                name: 'Premium Package',
                sales: 2847 + Math.floor(Math.random() * 200),
                revenue: 23450 + Math.floor(Math.random() * 2000),
                growth: (Math.random() * 15 + 5).toFixed(1)
              },
              {
                name: 'Basic Package',
                sales: 1923 + Math.floor(Math.random() * 150),
                revenue: 15220 + Math.floor(Math.random() * 1500),
                growth: (Math.random() * 12 + 3).toFixed(1)
              },
              {
                name: 'Enterprise',
                sales: 456 + Math.floor(Math.random() * 50),
                revenue: 45600 + Math.floor(Math.random() * 5000),
                growth: (Math.random() * 10 - 5).toFixed(1)
              }
            ]
          };
        }

        async loadData() {
          try {
            this.data = await this.fetchMockData();
            this.updateWidgets();
            this.updateCharts();
          } catch (error) {
            console.error('Error loading data:', error);
          }
        }

        updateWidgets() {
          Object.keys(this.data).forEach(key => {
            if (['chartData', 'trafficData', 'salesData', 'products'].includes(key)) return;

            const widget = document.querySelector(`[data-widget="${key}"]`);
            if (widget) {
              const valueEl = widget.querySelector('.widget-value');
              const changeEl = widget.querySelector('.widget-change');

              if (valueEl) {
                valueEl.classList.remove('loading');
                if (key === 'revenue') {
                  valueEl.textContent = `$${this.data[key].value.toLocaleString()}`;
                } else if (key === 'conversion' || key === 'bounce') {
                  valueEl.textContent = `${this.data[key].value}%`;
                } else {
                  valueEl.textContent = this.data[key].value.toLocaleString();
                }
              }

              if (changeEl) {
                const change = parseFloat(this.data[key].change);
                changeEl.className = `widget-change ${change >= 0 ? 'positive' : 'negative'}`;
                changeEl.textContent = `${change >= 0 ? '+' : ''}${change}% from last month`;
              }
            }
          });

          // Update products table
          this.updateProductsTable();
        }

        updateProductsTable() {
          const tableBody = document.getElementById('productsTable');
          if (tableBody && this.data.products) {
            tableBody.innerHTML = this.data.products.map(product => `
              <tr>
                <td style="font-weight: 500">${product.name}</td>
                <td>${product.sales.toLocaleString()}</td>
                <td>$${product.revenue.toLocaleString()}</td>
                <td style="color: var(--${parseFloat(product.growth) >= 0 ? 'success' : 'danger'}-color); font-weight: 500">
                  ${parseFloat(product.growth) >= 0 ? '+' : ''}${product.growth}%
                </td>
              </tr>
            `).join('');
          }
        }

        // ==========================================
        // CHART INITIALIZATION
        // ==========================================
        initCharts() {
          this.createRevenueChart();
          this.createTrafficChart();
          this.createSalesChart();
        }

        createRevenueChart() {
          const ctx = document.getElementById('revenueChart');
          if (!ctx) return;

          const isDark = this.theme === 'dark';

          this.charts.revenue = new Chart(ctx, {
            type: 'line',
            data: {
              labels: [],
              datasets: [{
                label: 'Revenue',
                data: [],
                borderColor: '#2563eb',
                backgroundColor: 'rgba(37, 99, 235, 0.1)',
                borderWidth: 3,
                fill: true,
                tension: 0.4,
                pointBackgroundColor: '#2563eb',
                pointBorderColor: '#ffffff',
                pointBorderWidth: 2,
                pointRadius: 4,
                pointHoverRadius: 6
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  display: false
                }
              },
              scales: {
                x: {
                  grid: {
                    color: isDark ? '#374151' : '#e5e7eb',
                    borderColor: isDark ? '#374151' : '#e5e7eb'
                  },
                  ticks: {
                    color: isDark ? '#d1d5db' : '#6b7280'
                  }
                },
                y: {
                  grid: {
                    color: isDark ? '#374151' : '#e5e7eb',
                    borderColor: isDark ? '#374151' : '#e5e7eb'
                  },
                  ticks: {
                    color: isDark ? '#d1d5db' : '#6b7280',
                    callback: function(value) {
                      return '$' + (value / 1000).toFixed(0) + 'k';
                    }
                  }
                }
              },
              interaction: {
                intersect: false,
                mode: 'index'
              }
            }
          });
        }

        createTrafficChart() {
          const ctx = document.getElementById('trafficChart');
          if (!ctx) return;

          this.charts.traffic = new Chart(ctx, {
            type: 'doughnut',
            data: {
              labels: ['Direct', 'Social', 'Search', 'Email'],
              datasets: [{
                data: [35, 25, 30, 10],
                backgroundColor: [
                  '#2563eb',
                  '#10b981',
                  '#f59e0b',
                  '#ef4444'
                ],
                borderWidth: 0,
                hoverOffset: 4
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  position: 'bottom',
                  labels: {
                    padding: 20,
                    usePointStyle: true,
                    color: this.theme === 'dark' ? '#d1d5db' : '#6b7280'
                  }
                }
              }
            }
          });
        }

        createSalesChart() {
          const ctx = document.getElementById('salesChart');
          if (!ctx) return;

          const isDark = this.theme === 'dark';

          this.charts.sales = new Chart(ctx, {
            type: 'bar',
            data: {
              labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
              datasets: [{
                label: 'Sales',
                data: [12, 19, 15, 25, 22, 30],
                backgroundColor: 'rgba(37, 99, 235, 0.8)',
                borderColor: '#2563eb',
                borderWidth: 1,
                borderRadius: 4
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                legend: {
                  display: false
                }
              },
              scales: {
                x: {
                  grid: {
                    color: isDark ? '#374151' : '#e5e7eb',
                    borderColor: isDark ? '#374151' : '#e5e7eb'
                  },
                  ticks: {
                    color: isDark ? '#d1d5db' : '#6b7280'
                  }
                },
                y: {
                  grid: {
                    color: isDark ? '#374151' : '#e5e7eb',
                    borderColor: isDark ? '#374151' : '#e5e7eb'
                  },
                  ticks: {
                    color: isDark ? '#d1d5db' : '#6b7280'
                  }
                }
              }
            }
          });
        }

        updateCharts() {
          if (this.charts.revenue && this.data.chartData) {
            this.charts.revenue.data.labels = this.data.chartData.labels;
            this.charts.revenue.data.datasets[0].data = this.data.chartData.revenue;
            this.charts.revenue.update();
          }

          if (this.charts.traffic && this.data.trafficData) {
            this.charts.traffic.data.datasets[0].data = this.data.trafficData;
            this.charts.traffic.update();
          }

          if (this.charts.sales && this.data.salesData) {
            this.charts.sales.data.datasets[0].data = this.data.salesData;
            this.charts.sales.update();
          }
        }

        updateChartsTheme() {
          const isDark = this.theme === 'dark';

          Object.entries(this.charts).forEach(([key, chart]) => {
            if (chart.options.scales) {
              ['x', 'y'].forEach(axis => {
                if (chart.options.scales[axis]) {
                  chart.options.scales[axis].grid.color = isDark ? '#374151' : '#e5e7eb';
                  chart.options.scales[axis].grid.borderColor = isDark ? '#374151' : '#e5e7eb';
                  chart.options.scales[axis].ticks.color = isDark ? '#d1d5db' : '#6b7280';
                }
              });
            }

            // Update legend colors for doughnut chart
            if (key === 'traffic' && chart.options.plugins?.legend?.labels) {
              chart.options.plugins.legend.labels.color = isDark ? '#d1d5db' : '#6b7280';
            }

            chart.update();
          });
        }

        // ==========================================
        // PWA FEATURES
        // ==========================================
        initPWA() {
          // Service Worker registration
          if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
              .then(registration => {
                console.log('SW registered:', registration);

                // Check for updates
                registration.addEventListener('updatefound', () => {
                  const newWorker = registration.installing;
                  newWorker.addEventListener('statechange', () => {
                    if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                      this.showUpdateNotification();
                    }
                  });
                });
              })
              .catch(error => {
                console.log('SW registration failed:', error);
              });
          }

          // Online/Offline detection
          this.initOfflineDetection();

          // Install prompt
          this.initInstallPrompt();
        }

        initOfflineDetection() {
          const offlineIndicator = document.getElementById('offlineIndicator');

          const updateOnlineStatus = () => {
            if (navigator.onLine) {
              offlineIndicator.classList.remove('show');
              this.loadData(); // Refresh data when back online
            } else {
              offlineIndicator.classList.add('show');
            }
          };

          window.addEventListener('online', updateOnlineStatus);
          window.addEventListener('offline', updateOnlineStatus);

          // Initial check
          updateOnlineStatus();
        }

        initInstallPrompt() {
          let deferredPrompt;

          window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;

            // Show install button or notification
            this.showInstallOption(deferredPrompt);
          });

          window.addEventListener('appinstalled', () => {
            console.log('PWA was installed');
            deferredPrompt = null;
          });
        }

        showInstallOption(deferredPrompt) {
          // Create install notification
          const installNotification = document.createElement('div');
          installNotification.innerHTML = `
            <div style="
              position: fixed;
              bottom: 20px;
              left: 20px;
              background: var(--primary-color);
              color: white;
              padding: 1rem;
              border-radius: var(--border-radius);
              box-shadow: var(--shadow-lg);
              z-index: 1000;
              max-width: 300px;
            ">
              <div style="margin-bottom: 0.5rem; font-weight: 600;">
                üì± Install Dashboard App
              </div>
              <div style="margin-bottom: 1rem; font-size: 0.875rem;">
                Add to your home screen for quick access
              </div>
              <div style="display: flex; gap: 0.5rem;">
                <button id="installBtn" style="
                  background: white;
                  color: var(--primary-color);
                  border: none;
                  padding: 0.5rem 1rem;
                  border-radius: 4px;
                  font-weight: 500;
                  cursor: pointer;
                ">Install</button>
                <button id="dismissBtn" style="
                  background: transparent;
                  color: white;
                  border: 1px solid white;
                  padding: 0.5rem 1rem;
                  border-radius: 4px;
                  cursor: pointer;
                ">Later</button>
              </div>
            </div>
          `;

          document.body.appendChild(installNotification);

          document.getElementById('installBtn').addEventListener('click', async () => {
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            console.log(`User response to install prompt: ${outcome}`);
            installNotification.remove();
          });

          document.getElementById('dismissBtn').addEventListener('click', () => {
            installNotification.remove();
          });
        }

        showUpdateNotification() {
          const updateNotification = document.createElement('div');
          updateNotification.innerHTML = `
            <div style="
              position: fixed;
              top: 20px;
              left: 50%;
              transform: translateX(-50%);
              background: var(--success-color);
              color: white;
              padding: 1rem;
              border-radius: var(--border-radius);
              box-shadow: var(--shadow-lg);
              z-index: 1000;
            ">
              üîÑ New version available!
              <button onclick="window.location.reload()" style="
                background: white;
                color: var(--success-color);
                border: none;
                padding: 0.25rem 0.5rem;
                border-radius: 4px;
                margin-left: 0.5rem;
                cursor: pointer;
              ">Update</button>
            </div>
          `;

          document.body.appendChild(updateNotification);

          setTimeout(() => {
            updateNotification.remove();
          }, 10000);
        }

        // ==========================================
        // ANIMATIONS
        // ==========================================
        animateWidgets() {
          const widgets = document.querySelectorAll('.widget');
          widgets.forEach((widget, index) => {
            widget.style.animationDelay = `${index * 0.1}s`;
          });
        }

        // ==========================================
        // REAL-TIME UPDATES
        // ==========================================
        startRealTimeUpdates() {
          setInterval(() => {
            if (Math.random() > 0.8) { // 20% chance of update
              this.loadData();
            }
          }, 30000); // Every 30 seconds
        }
      }

      // Initialize the dashboard when DOM is loaded
      document.addEventListener('DOMContentLoaded', () => {
        const dashboard = new DashboardApp();
        dashboard.startRealTimeUpdates();
      });
    </script>
  </body>
</html>
